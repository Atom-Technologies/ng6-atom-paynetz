{"version":3,"file":"ng6-atom-paynetz.umd.js.map","sources":["ng://ng6-atom-paynetz/lib/ProcessPayment/ProcessPayment.component.ts","ng://ng6-atom-paynetz/lib/ng6-atom-paynetz.module.ts","ng://ng6-atom-paynetz/public_api.ts","ng://ng6-atom-paynetz/ng6-atom-paynetz.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport * as hash from 'js-sha512';\r\n\r\n@Component({\r\n  selector: 'lib-config',\r\n  template: `<p>\r\n  config works!\r\n</p>\r\n`,\r\n  styles: [``]\r\n})\r\n\r\nexport class ProcessPaymentComponent implements OnInit {\r\n\r\n  private loginId: any;\r\n  private password: any;\r\n  private url: any;\r\n  private clientCode: any;\r\n  private requestHashKey: any;\r\n  private responseHashKey: any;\r\n  private prodid: any;\r\n  private signature: any;\r\n  private amt: any;\r\n  private txncurr: any;\r\n  private txntype: any;\r\n  private txnscamt: any;\r\n  private txnid: any;\r\n  private custacc: any;\r\n  private returnURL: any;\r\n  private mdd = null;\r\n  private bankId = null;\r\n  private udf1: any;\r\n  private udf2: any;\r\n  private udf3: any;\r\n  private udf4: any;\r\n  private childWindow: any;\r\n  private response: any;\r\n  constructor() {\r\n  }\r\n\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  setLoginid(login: string) {\r\n    this.loginId = login;\r\n  }\r\n\r\n  setPassword(password: string) {\r\n    this.password = password;\r\n  }\r\n\r\n  setURL(url: string) {\r\n    this.url = url;\r\n  }\r\n\r\n  setClientCode(clientCode: string) {\r\n    this.clientCode = clientCode;\r\n  }\r\n\r\n  setRequestHaskKey(requestHashKey: string) {\r\n    this.requestHashKey = requestHashKey;\r\n  }\r\n\r\n  setResponseHashKey(responseHashKey: string) {\r\n    this.responseHashKey = responseHashKey;\r\n  }\r\n\r\n  setProdId(prodid: string) {\r\n    this.prodid = prodid;\r\n  }\r\n\r\n  setTxnId(txnid: string) {\r\n    this.txnid = txnid;\r\n  }\r\n\r\n  setCustAcc(custacc: string) {\r\n    this.custacc = custacc;\r\n  }\r\n\r\n  setAmount(amt: string) {\r\n    this.amt = amt;\r\n  }\r\n\r\n  setCurrency(txncurr: string) {\r\n    this.txncurr = txncurr;\r\n  }\r\n\r\n  setTxnType(txntype: string) {\r\n    this.txntype = txntype;\r\n  }\r\n\r\n  setReturnUrl(returnURL: string) {\r\n    this.returnURL = 'https://www.atomtech.in/angular-kit-handle/params_response.php';\r\n  }\r\n\r\n  setTxnsCamt(txnscamt: string) {\r\n    this.txnscamt = txnscamt;\r\n  }\r\n\r\n  setCustomerName(udf1: string) {\r\n    this.udf1 = udf1;\r\n  }\r\n\r\n  setCustomerEmail(udf2: string) {\r\n    this.udf2 = udf2;\r\n  }\r\n\r\n  setCustomerMobile(udf3: string) {\r\n    this.udf3 = udf3;\r\n  }\r\n\r\n  setCustomerAddress(udf4: string) {\r\n    this.udf4 = udf4;\r\n  }\r\n\r\n  setMdd(mdd: string) {\r\n    this.mdd = mdd;\r\n  }\r\n\r\n  setBankId(bankId: string) {\r\n    this.bankId = bankId;\r\n  }\r\n  generateChecksum() {\r\n    this.signature = this.loginId + this.password + this.txntype + this.prodid + this.txnid + this.amt + this.txncurr;\r\n    return hash.sha512.hmac(this.requestHashKey, this.signature);\r\n  }\r\n\r\n\r\n\r\n  payNow() {\r\n\r\n    let urlToPay = this.url;\r\n    urlToPay += '?login=' + this.loginId;\r\n    urlToPay += '&pass=' + this.password;\r\n    urlToPay += '&ttype=' + this.txntype;\r\n    urlToPay += '&prodid=' + this.prodid;\r\n    urlToPay += '&amt=' + this.amt;\r\n    urlToPay += '&txncurr=' + this.txncurr;\r\n    urlToPay += '&txnscamt=' + this.txnscamt;\r\n    urlToPay += '&clientcode=' + btoa(this.clientCode);\r\n    urlToPay += '&txnid=' + this.txnid;\r\n    urlToPay += '&date=' + this.formatDate(new Date);\r\n    urlToPay += '&custacc=' + this.custacc;\r\n    urlToPay += '&ru=' + this.returnURL;\r\n    urlToPay += '&signature=' + this.generateChecksum();\r\n    urlToPay += '&udf1=' + this.udf1;\r\n    urlToPay += '&udf2=' + this.udf2;\r\n    urlToPay += '&udf3=' + this.udf3;\r\n    urlToPay += '&udf4=' + this.udf4;\r\n\r\n    if (this.mdd != null) {\r\n      urlToPay += '&mdd=' + this.mdd;\r\n    }\r\n\r\n    if (this.bankId != null) {\r\n      urlToPay += '&bankid=' + this.bankId;\r\n    }\r\n\r\n    const url = encodeURI(urlToPay);\r\n    let res = null;\r\n\r\n    const left = (window.screen.width / 2) - ((1200 / 2) + 10);\r\n    const top = '22%';\r\n\r\n    const childWindow = window.open(url, 'Atom Paynetz', 'status=no,height=600,width=1200,resizable=yes,left='\r\n      + left + ',top=' + top + ',screenX=' + left + ',screenY='\r\n      + top + ',toolbar=no,menubar=no,scrollbars=no,location=no,directories=no');\r\n\r\n    const promise = new Promise(resolve => {\r\n      window.addEventListener('message', function (e) {\r\n        if (e.origin === 'https://www.atomtech.in') {\r\n          res = e.data;\r\n          childWindow.close();\r\n        }\r\n      }, false);\r\n      const intervalID = window.setInterval(checkWindow, 500);\r\n      function checkWindow(e: any) {\r\n        if (childWindow && childWindow.closed) {\r\n          if (res) {\r\n            this.response = res;\r\n            window.clearInterval(intervalID);\r\n            resolve({\r\n              status: true,\r\n              data: res,\r\n            });\r\n          } else {\r\n            window.clearInterval(intervalID);\r\n            window.clearInterval(intervalID);\r\n            resolve({\r\n              status: false,\r\n              data: 'payment not completed',\r\n            });\r\n          }\r\n\r\n        }\r\n      }\r\n    });\r\n\r\n    return promise;\r\n\r\n  }\r\n\r\n  validateResponse(mmp_txn: any, mer_txn: any, f_code: any, prod: any, discriminator: any, amt: any, bank_txn: any, signature: any) {\r\n    const string_verify = mmp_txn + mer_txn + f_code + prod + discriminator + amt + bank_txn;\r\n    const sig = hash.sha512.hmac(this.responseHashKey, string_verify);\r\n\r\n    if (signature === sig) {\r\n      return {\r\n        'status': true,\r\n        'message': 'Signature matched = ' + sig + ' = ' + this.responseHashKey\r\n      };\r\n    } else {\r\n      return {\r\n        'status': false,\r\n        'message': 'Signature mismatched = ' + sig + ' = ' + this.responseHashKey\r\n      };\r\n    }\r\n  }\r\n\r\n  formatDate(date: any) {\r\n    const day = date.getDate();\r\n    let monthIndex = date.getMonth() + 1;\r\n    const year = date.getFullYear();\r\n    const second = date.getSeconds();\r\n    const hours = date.getHours();\r\n    const minutes = date.getMinutes();\r\n    if (monthIndex < 10) {\r\n      monthIndex = '0' + monthIndex;\r\n    }\r\n    return day + '/' + Number(monthIndex) + '/' + year + ' ' + hours + ':' + minutes + ':' + second;\r\n  }\r\n\r\n}\r\n","\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\nimport {RouterModule, Routes} from '@angular/router';\r\nimport { ProcessPaymentComponent } from './ProcessPayment/ProcessPayment.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    BrowserModule,\r\n  ],\r\n  declarations: [ProcessPaymentComponent],\r\n  exports: []\r\n})\r\n\r\nexport class Ng6AtomPaynetzModule { }\r\n","/*\r\n * Public API Surface of ng6-atom-paynetz\r\n */\r\n\r\nexport * from './lib/ng6-atom-paynetz.module';\r\n// components\r\nexport * from './lib/ProcessPayment/ProcessPayment.component';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["hash.sha512","Component","NgModule","BrowserModule"],"mappings":"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"}
