!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("js-sha512"),require("@angular/platform-browser")):"function"==typeof define&&define.amd?define("ng6-atom-paynetz",["exports","@angular/core","js-sha512","@angular/platform-browser"],e):e(t["ng6-atom-paynetz"]={},t.ng.core,null,t.ng.platformBrowser)}(this,function(t,e,c,n){"use strict";var o=function(){function t(){}return t.prototype.ngOnInit=function(){},t.prototype.setLoginid=function(t){this.loginId=t},t.prototype.setPassword=function(t){this.password=t},t.prototype.setURL=function(t){this.url=t},t.prototype.setClientCode=function(t){this.clientCode=t},t.prototype.setRequestHaskKey=function(t){this.requestHashKey=t},t.prototype.setResponseHashKey=function(t){this.responseHashKey=t},t.prototype.setProdId=function(t){this.prodid=t},t.prototype.setTxnId=function(t){this.txnid=t},t.prototype.setCustAcc=function(t){this.custacc=t},t.prototype.setAmount=function(t){this.amt=t},t.prototype.setCurrency=function(t){this.txncurr=t},t.prototype.setTxnType=function(t){this.txntype=t},t.prototype.setReturnUrl=function(t){this.returnURL="https://www.atomtech.in/angular-kit-handle/params_response.php"},t.prototype.setTxnsCamt=function(t){this.txnscamt=t},t.prototype.setCustomerName=function(t){this.udf1=t},t.prototype.setCustomerEmail=function(t){this.udf2=t},t.prototype.setCustomerMobile=function(t){this.udf3=t},t.prototype.setCustomerAddress=function(t){this.udf4=t},t.prototype.generateChecksum=function(){return this.signature=this.loginId+this.password+this.txntype+this.prodid+this.txnid+this.amt+this.txncurr,c.sha512.hmac(this.requestHashKey,this.signature)},t.prototype.payNow=function(){var t=this.url;t+="?login="+this.loginId,t+="&pass="+this.password,t+="&ttype="+this.txntype,t+="&prodid="+this.prodid,t+="&amt="+this.amt,t+="&txncurr="+this.txncurr,t+="&txnscamt="+this.txnscamt,t+="&clientcode="+btoa(this.clientCode),t+="&txnid="+this.txnid,t+="&date="+this.formatDate(new Date),t+="&custacc="+this.custacc,t+="&ru="+this.returnURL,t+="&signature="+this.generateChecksum(),t+="&udf1="+this.udf1,t+="&udf2="+this.udf2,t+="&udf3="+this.udf3,t+="&udf4="+this.udf4;var e=encodeURI(t),s=null,n=window.screen.width/2-610,o=window.screen.height/2-435,r=window.open(e,"Atom Paynetz","status=no,height=600,width=1200,resizable=yes,left="+n+",top="+o+",screenX="+n+",screenY="+o+",toolbar=no,menubar=no,scrollbars=no,location=no,directories=no");return new Promise(function(e){window.addEventListener("message",function(t){"https://www.atomtech.in"===t.origin&&(s=t.data,r.close())},!1);var n=window.setInterval(function o(t){r&&r.closed&&(s?(this.response=s,window.clearInterval(n),e({status:!0,data:s})):(window.clearInterval(n),window.clearInterval(n),e({status:!1,data:"payment not completed"})))},500)})},t.prototype.validateResponse=function(t,e,n,o,s,r,i,a){var u=t+e+n+o+s+r+i,p=c.sha512.hmac(this.responseHashKey,u);return a===p?{status:!0,message:"Signature matched = "+p+" = "+this.responseHashKey}:{status:!1,message:"Signature mismatched = "+p+" = "+this.responseHashKey}},t.prototype.formatDate=function(t){var e=t.getDate(),n=t.getMonth()+1,o=t.getFullYear(),s=t.getSeconds(),r=t.getHours(),i=t.getMinutes();return n<10&&(n="0"+n),e+"/"+Number(n)+"/"+o+" "+r+":"+i+":"+s},t.decorators=[{type:e.Component,args:[{selector:"lib-config",template:"<p>\n  config works!\n</p>\n",styles:[""]}]}],t.ctorParameters=function(){return[]},t}(),s=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{imports:[n.BrowserModule],declarations:[o],exports:[]}]}],t}();t.Ng6AtomPaynetzModule=s,t.ProcessPaymentComponent=o,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ng6-atom-paynetz.umd.min.js.map