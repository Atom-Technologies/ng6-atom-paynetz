!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("js-sha512"),require("@angular/platform-browser")):"function"==typeof define&&define.amd?define("ng6-atom-paynetz",["exports","@angular/core","js-sha512","@angular/platform-browser"],e):e(t["ng6-atom-paynetz"]={},t.ng.core,null,t.ng.platformBrowser)}(this,function(t,e,p,s){"use strict";var n=function(){function t(){var t=this;this.loginId="",this.password="",this.url="",this.clientCode="",this.requestHashKey="",this.responseHashKey="",this.prodid="",this.signature="",this.amt="",this.txncurr="",this.txntype="",this.txnscamt="",this.txnid="",this.custacc="",this.returnURL="",this.udf1="",this.udf2="",this.udf3="",this.udf4="",this.get_response=function(){return t.response}}return t.prototype.ngOnInit=function(){},t.prototype.setLoginid=function(t){this.loginId=t},t.prototype.setPassword=function(t){this.password=t},t.prototype.setURL=function(t){this.url=t},t.prototype.setClientCode=function(t){this.clientCode=t},t.prototype.setRequestHaskKey=function(t){this.requestHashKey=t},t.prototype.setResponseHashKey=function(t){this.responseHashKey=t},t.prototype.setProdId=function(t){this.prodid=t},t.prototype.setTxnId=function(t){this.txnid=t},t.prototype.setCustAcc=function(t){this.custacc=t},t.prototype.setAmount=function(t){this.amt=t},t.prototype.setCurrency=function(t){this.txncurr=t},t.prototype.setTxnType=function(t){this.txntype=t},t.prototype.setReturnUrl=function(t){this.returnURL="https://www.atomtech.in/angular-kit-handle/params_response.php"},t.prototype.setTxnsCamt=function(t){this.txnscamt=t},t.prototype.setCustomerName=function(t){this.udf1=t},t.prototype.setCustomerEmail=function(t){this.udf2=t},t.prototype.setCustomerMobile=function(t){this.udf3=t},t.prototype.setCustomerAddress=function(t){this.udf4=t},t.prototype.generateChecksum=function(){return this.signature=this.loginId+this.password+this.txntype+this.prodid+this.txnid+this.amt+this.txncurr,p.sha512.hmac(this.requestHashKey,this.signature)},t.prototype.payNow=function(){var t=this.url;t+="?login="+this.loginId,t+="&pass="+this.password,t+="&ttype="+this.txntype,t+="&prodid="+this.prodid,t+="&amt="+this.amt,t+="&txncurr="+this.txncurr,t+="&txnscamt="+this.txnscamt,t+="&clientcode="+btoa(this.clientCode),t+="&txnid="+this.txnid,t+="&date="+this.formatDate(new Date),t+="&custacc="+this.custacc,t+="&ru="+this.returnURL,t+="&signature="+this.generateChecksum(),t+="&udf1="+this.udf1,t+="&udf2="+this.udf2,t+="&udf3="+this.udf3,t+="&udf4="+this.udf4;var e=encodeURI(t),o=null,s=window.screen.width/2-610,n=window.screen.height/2-435,r=window.open(e,"Atom Paynetz","status=no,height=600,width=1200,resizable=yes,left="+s+",top="+n+",screenX="+s+",screenY="+n+",toolbar=no,menubar=no,scrollbars=no,location=no,directories=no");return new Promise(function(e){window.addEventListener("message",function(t){"https://www.atomtech.in"===t.origin&&(o=t.data,r.close())},!1);var s=window.setInterval(function n(t){r&&r.closed&&(o?(this.response=o,window.clearInterval(s),e({status:!0,data:o})):(window.clearInterval(s),window.clearInterval(s),e({status:!1,data:"payment not completed"})))},500)})},t.prototype.validateResponse=function(t,e,s,n,o,r,i,a){var u=t+e+s+n+o+r+i,h=p.sha512.hmac(this.responseHashKey,u);return a===h?{status:!0,message:"Signature matched = "+h+" = "+this.responseHashKey}:{status:!1,message:"Signature mismatched = "+h+" = "+this.responseHashKey}},t.prototype.formatDate=function(t){var e=t.getDate(),s=t.getMonth()+1,n=t.getFullYear(),o=t.getSeconds(),r=t.getHours(),i=t.getMinutes();return s<10&&(s="0"+s),e+"/"+Number(s)+"/"+n+" "+r+":"+i+":"+o},t.decorators=[{type:e.Component,args:[{selector:"lib-config",template:"<p>\n  config works!\n</p>\n",styles:[""]}]}],t.ctorParameters=function(){return[]},t}(),o=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{imports:[s.BrowserModule],declarations:[n],exports:[]}]}],t}();t.Ng6AtomPaynetzModule=o,t.ProcessPaymentComponent=n,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ng6-atom-paynetz.umd.min.js.map